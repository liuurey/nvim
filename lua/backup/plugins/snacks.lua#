return {
  "folke/snacks.nvim",
  priority = 1000,
  lazy = false,
  ---@type snacks.Config
  opts = function()
    -- å…¨å±€å˜é‡æ§åˆ¶é…ç½®æ¨¡å¼
    _G.dashboard_mode = _G.dashboard_mode or "preset" -- "preset" æˆ– "sections"
    
    -- Preset é…ç½®æ–¹æ¡ˆ
    local preset_config = {
      enabled = true,
      preset = {
        header = [[
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ–ˆâ•—â–‘â–‘â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—â–‘â–‘â–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•  â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„  â”‚
    â”‚  â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â•â•â–ˆâ–ˆâ•— â”‚
    â”‚  â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘ â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘ â”‚
    â”‚  â–‘â•šâ•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–‘â•šâ•â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘ â”‚
    â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–‘â•šâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–‘â•šâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•  â”‚
    â”‚  â•šâ•â•â•â•â•â•â–‘â•šâ•â•â–‘â–‘â•šâ•â•â•šâ•â•â–‘â–‘â•šâ•â•â•â•šâ•â•â•šâ•â•â–‘â–‘â•šâ•â•â•â•šâ•â•â•â•â•â•â–‘  â•šâ•â•â•â•â•â•   â”‚
    â”‚            â–“â–“â–“ Next-Gen Neovim Experience â–“â–“â–“             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        ]],
        keys = {
          { icon = "ó°ˆ ", key = "f", desc = "Find File", action = ":lua Snacks.dashboard.pick('files')" },
          { icon = "ó°ˆ” ", key = "n", desc = "New File", action = ":ene | startinsert" },
          { icon = "ó°Š„ ", key = "g", desc = "Find Text", action = ":lua Snacks.dashboard.pick('live_grep')" },
          { icon = "ó°‹š ", key = "r", desc = "Recent Files", action = ":lua Snacks.dashboard.pick('oldfiles')" },
          { icon = "ó°’“ ", key = "c", desc = "Config", action = ":lua Snacks.dashboard.pick('files', {cwd = vim.fn.stdpath('config')})" },
          { icon = "ó°‘“ ", key = "s", desc = "Restore Session", section = "session" },
          { icon = "ó°’² ", key = "l", desc = "Sanins Manager", action = ":Lazy", enabled = package.loaded.lazy ~= nil },
          { icon = "ó°“™ ", key = "h", desc = "Health Check", action = ":checkhealth" },
          { icon = "ó°¦¤ ", key = "m", desc = "Mason Tools", action = ":Mason" },
          { icon = "ó°”› ", key = "t", desc = "TreeSitter", action = ":TSInstallInfo" },
          { icon = "ó°—¼ ", key = "q", desc = "Quit Sanins", action = ":qa" },
          { icon = "ğŸ”„ ", key = "<F12>", desc = "Switch to Sections", action = ":lua _G.dashboard_mode = 'sections'; if vim.bo.filetype == 'snacks_dashboard' then vim.cmd('bd') end; require('snacks').dashboard()" },
        },
        footer = function()
          local stats = require("lazy").stats()
          local ms = (math.floor(stats.startuptime * 100 + 0.5) / 100)
          return "âš¡ SANINS [PRESET] loaded " .. stats.loaded .. "/" .. stats.count .. " plugins in " .. ms .. "ms"
        end,
      },
    }
    
    -- Sections é…ç½®æ–¹æ¡ˆ
    local sections_config = {
      enabled = true,
      sections = {
        -- Header åˆ†åŒº
        {
          section = "header",
          text = [[
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘  â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“ â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„ â–ˆâ–ˆâ–“â–ˆâ–ˆâ–ˆâ–“ â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–ˆâ–ˆ   â–ˆâ–ˆâ–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„  â•‘
    â•‘  â–ˆâ–ˆâ–“       â–ˆâ–ˆâ–“ â–“â–ˆâ–ˆâ–“â–ˆâ–ˆâ–“â–ˆâ–ˆâ–ˆâ–“   â–“ â–ˆâ–ˆâ–“ â–“â–ˆâ–ˆâ–“â–“â–ˆâ–ˆ â–ˆâ–ˆâ–“â–“   â–ˆâ–ˆâ–“ â–“â–ˆâ–ˆâ–“ â•‘
    â•‘  â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“ â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–ˆâ–ˆâ–“ â–“â–ˆâ–ˆâ–“ â–“â–ˆâ–ˆâ–“â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–“ â•‘
    â•‘       â–“â–ˆâ–ˆâ–“â–ˆâ–ˆâ–“ â–“â–ˆâ–ˆâ–“â–ˆâ–ˆâ–“   â–“â–“â–ˆâ–ˆâ–“ â–“â–ˆâ–ˆâ–“â–“â–ˆâ–ˆâ–“â–ˆâ–ˆâ–“     â–“â–ˆâ–ˆâ–“â–ˆâ–ˆâ–“ â–“â–ˆâ–ˆâ–“ â•‘
    â•‘  â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–ˆâ–ˆâ–“ â–“â–ˆâ–ˆâ–“â–ˆâ–ˆâ–“â–ˆâ–ˆâ–ˆâ–“â–“â–ˆâ–ˆâ–“ â–“â–ˆâ–ˆâ–“â–“â–ˆâ–ˆâ–“ â–ˆâ–ˆâ–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–ˆâ–ˆâ–“ â–“â–ˆâ–ˆâ–“ â•‘
    â•‘            âŸ¨âŸ¨âŸ¨ Advanced Sections Layout âŸ©âŸ©âŸ©             â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          ]],
          align = "center",
          padding = 1,
        },
        
        -- æ’ä»¶ç»Ÿè®¡ä¿¡æ¯
        {
          text = function()
            local stats = require("lazy").stats()
            local ms = (math.floor(stats.startuptime * 100 + 0.5) / 100)
            return "âš¡ SANINS [SECTIONS] loaded " .. stats.loaded .. "/" .. stats.count .. " plugins in " .. ms .. "ms"
          end,
          align = "center",
          padding = 1,
        },
        
        -- åŠŸèƒ½æŒ‰é”®åˆ†åŒºï¼ˆå·¦ä¾§ï¼‰
        {
          pane = 1,
          title = "ğŸš€ Quick Actions",
          padding = 1,
        },
        { pane = 1, icon = "ó°ˆ ", title = "Find File", desc = "Search files", action = ":lua Snacks.dashboard.pick('files')", key = "f" },
        { pane = 1, icon = "ó°ˆ” ", title = "New File", desc = "Create new", action = ":ene | startinsert", key = "n" },
        { pane = 1, icon = "ó°Š„ ", title = "Find Text", desc = "Search text", action = ":lua Snacks.dashboard.pick('live_grep')", key = "g" },
        { pane = 1, icon = "ó°’“ ", title = "Config", desc = "Edit config", action = ":lua Snacks.dashboard.pick('files', {cwd = vim.fn.stdpath('config')})", key = "c" },
        
        -- å·¥å…·åˆ†åŒºï¼ˆå³ä¾§ï¼‰
        {
          pane = 2,
          title = "ğŸ”§ Development Tools",
          padding = 1,
        },
        { pane = 2, icon = "ó°’² ", title = "Lazy Manager", desc = "Plugin manager", action = ":Lazy", key = "l" },
        { pane = 2, icon = "ó°“™ ", title = "Health Check", desc = "System health", action = ":checkhealth", key = "h" },
        { pane = 2, icon = "ó°¦¤ ", title = "Mason Tools", desc = "LSP manager", action = ":Mason", key = "m" },
        { pane = 2, icon = "ó°”› ", title = "TreeSitter", desc = "Parser info", action = ":TSInstallInfo", key = "t" },
        
        -- Recent Files åˆ†åŒº
        {
          pane = 2,
          title = "ğŸ“ Recent Files",
          section = "recent_files",
          indent = 2,
          padding = 1,
          limit = 5,
        },
        
        -- åˆ‡æ¢æŒ‰é”®
        {
          text = "Press <F12> to switch to PRESET mode",
          align = "center",
          padding = 1,
          hl = "Comment",
        },
      },
    }
    
    -- æ ¹æ®æ¨¡å¼è¿”å›å¯¹åº”é…ç½®
    local dashboard_config = (_G.dashboard_mode == "sections") and sections_config or preset_config
    
    return {
      -- SANINS ä¸ªæ€§åŒ–é…ç½®
      bigfile = { enabled = true },
      dashboard = dashboard_config,
      explorer = { enabled = true },
      indent = { enabled = true },
      input = { enabled = true },
      picker = { enabled = true },
      notifier = { enabled = true },
      quickfile = { enabled = true },
      scope = { enabled = true },
      scroll = { enabled = true },
      statuscolumn = { enabled = true },
      words = { enabled = true },
      image = { enabled = true }, -- å¯ç”¨å›¾åƒæ˜¾ç¤ºåŠŸèƒ½
    }
  end,
  config = function(_, opts)
    require("snacks").setup(opts)
    
    -- æ·»åŠ å…¨å±€åˆ‡æ¢å‡½æ•°
    vim.api.nvim_create_user_command("DashboardToggle", function()
      _G.dashboard_mode = (_G.dashboard_mode == "preset") and "sections" or "preset"
      -- å…ˆæ£€æŸ¥æ˜¯å¦åœ¨ dashboard buffer ä¸­
      if vim.bo.filetype == 'snacks_dashboard' then
        vim.cmd('bd')
      end
      require("snacks").dashboard()
      vim.notify("Dashboard mode: " .. _G.dashboard_mode:upper(), vim.log.levels.INFO)
    end, { desc = "Toggle dashboard mode between preset and sections" })
    
    -- æ·»åŠ F12é”®ä½æ˜ å°„
    vim.keymap.set("n", "<F12>", function()
      _G.dashboard_mode = (_G.dashboard_mode == "preset") and "sections" or "preset"
      -- å…ˆæ£€æŸ¥æ˜¯å¦åœ¨ dashboard buffer ä¸­
      if vim.bo.filetype == 'snacks_dashboard' then
        vim.cmd('bd')
      end
      require("snacks").dashboard()
      vim.notify("Dashboard mode: " .. _G.dashboard_mode:upper(), vim.log.levels.INFO)
    end, { desc = "Toggle dashboard mode" })
    
    -- ç¡®ä¿åœ¨å¯åŠ¨æ—¶æ˜¾ç¤º dashboard
    vim.api.nvim_create_autocmd("VimEnter", {
      group = vim.api.nvim_create_augroup("SaninsDashboard", { clear = true }),
      callback = function()
        -- åªæœ‰åœ¨æ²¡æœ‰æ–‡ä»¶å‚æ•°æ—¶æ‰æ˜¾ç¤º dashboard
        if vim.fn.argc() == 0 and vim.fn.line2byte('$') == -1 then
          require("snacks").dashboard()
        end
      end,
    })
  end,
}